<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Primitiv Desktop</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>
    <div class="main-content">
        <!-- Draggable area for moving the window -->
        <div class="draggable-area" data-draggable-area></div>
        <!-- Dropdown content from widget.html -->
        <div class="dropdown open" id="dropdown" data-dropdown>
            <!-- Unauthenticated State -->
            <div class="auth-state unauthenticated" data-auth-state="unauthenticated">
                <div class="auth-content">
                    <div class="auth-icon">
                        <img src="imgs/logo_top.svg" alt="Primitiv Logo" class="primitiv-logo">
                    </div>
                    <h3 class="auth-title">Welcome to Primitiv</h3>
                    <p class="auth-description">Your tasks, captured and prioritized.</p>
                    <button class="btn btn-primary" data-auth-login>
                        Sign in to continue
                    </button>
                </div>
            </div>

            <!-- Authenticating State -->
            <div class="auth-state authenticating" data-auth-state="authenticating">
                <div class="auth-content">
                    <div class="auth-icon">
                        <img src="imgs/logo_top.svg" alt="Primitiv Logo" class="primitiv-logo">
                    </div>
                    <h3 class="auth-title">Opening browser for sign in</h3>
                    <p class="auth-description">We've opened your browser to complete the sign-in process.</p>
                    <p class="auth-description" style="margin-top: 16px; font-size: 12px;">If your browser didn't open, <a href="#" data-auth-link style="color: #6C63FF; text-decoration: underline;">click here</a></p>
                </div>
            </div>

            <!-- Authenticated State -->
            <div class="auth-state authenticated active" data-auth-state="authenticated">
                <div class="auth-content">
                    <div class="task-management">
                        <!-- Task Management Interface -->
                        <div class="dd-header">
                            <button class="btn" data-new-task>
                                <img src="imgs/tasks_general/plus.svg" alt="New task" class="new-task-svg">
                                <span class="new-task-text">New task</span>
                            </button>
                            <button class="btn-icon" data-refresh-tasks aria-label="Refresh tasks" data-reload>
                                <img src="imgs/tasks_general/refresh_button.svg" alt="Refresh" class="refresh-svg">
                            </button>
                        </div>
                        
                        <div class="search" data-search>
                            <div class="field">
                                <span class="icon" aria-hidden="true">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#5f6368" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                                </span>
                                <input class="input" data-search-input type="text" placeholder="Search tasks" />
                                <button class="clear" data-search-clear aria-label="Clear">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#5f6368" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="filters" data-filters>
                            <button class="filter-btn active" data-filter="pending" aria-pressed="true">
                                Inbox
                                <div class="task-count-indicator" data-task-count style="display: none;">
                                    <div class="task-count-number">0</div>
                                </div>
                            </button>
                            <button class="filter-btn" data-filter="completed" aria-pressed="false">Completed</button>
                        </div>
                        
                        <div class="task-list" data-task-list>
                            <!-- Loading State -->
                            <div class="loading-state" data-loading-state>
                                <div class="loading-content">
                                    <div class="loading-spinner">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#007AFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <line x1="12" y1="2" x2="12" y2="6"></line>
                                            <line x1="12" y1="18" x2="12" y2="22"></line>
                                            <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line>
                                            <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line>
                                            <line x1="2" y1="12" x2="6" y2="12"></line>
                                            <line x1="18" y1="12" x2="22" y2="12"></line>
                                            <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line>
                                            <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line>
                                        </svg>
                                    </div>
                                    <span class="loading-text">Loading tasks...</span>
                                </div>
                            </div>

                            <!-- Empty State for Pending Tasks -->
                            <div class="empty-state" data-empty-state data-filter="pending">
                                <div class="empty-content">
                                    <div class="empty-illustration">
                                        <img src="imgs/tasks_general/box.svg" alt="Empty box illustration" class="box-svg">
                                    </div>
                                    <div class="empty-text">Don't let your tasks get away.<br/>Connect your accounts and let Primitiv bring them here.</div>
                                    <button class="btn btn-primary link-tools-btn" data-link-tools>
                                        <div class="link-tools-text">Link your tools</div>
                                    </button>
                                </div>
                            </div>

                            <!-- Empty State for Completed Tasks -->
                            <div class="empty-state" data-empty-state data-filter="completed">
                                <div class="empty-content">
                                    <div class="empty-illustration">
                                        <img src="imgs/tasks_general/closed_box.svg" alt="Completed box illustration" class="box-svg">
                                    </div>
                                    <div class="empty-text">No completed tasks yet.<br/>Complete some tasks to see them here.</div>
                                </div>
                            </div>

                            <!-- Task List Content -->
                            <div class="list-content" data-list-content>
                                <!-- Single Task List -->
                                <div class="task-group">
                                    <div class="task-items" data-task-items>
                                        <!-- Tasks will be dynamically loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- New Task Form View -->
                <div class="new-task-view" data-new-task-view>
                    <div class="modal-header">
                        <div class="modal-header-content">
                            <div class="task-icon-container">
                                <div class="task-icon">
                                    <img src="imgs/task_new/back.svg" alt="Back" class="back-icon" data-icon="back">
                                </div>
                                <div class="task-name-container">
                                    <div class="task-name-placeholder">Back to tasks</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal Body -->
                    <div class="modal-body">
                        <div class="task-title-container">
                            <input type="text" class="task-title-input" placeholder="New task name here">
                        </div>
                        
                        <div class="task-meta-container">
                            <div class="user-info">
                                <div class="user-avatar-small">
                                    <div class="user-initials-small">DV</div>
                                </div>
                                <div class="user-name-small">Me</div>
                            </div>
                            
                            <div class="task-actions">
                                <div class="action-button source-button">
                                    <div class="action-icon">
                                        <img src="imgs/sources/primitiv.svg" alt="Source" class="source-icon" data-icon="source">
                                    </div>
                                    <div class="action-text">Source</div>
                                </div>
                                <div class="action-button date-input-container">
                                    <div class="action-icon">
                                        <img src="imgs/task_new/calendar.svg" alt="Calendar" class="calendar-icon" data-icon="calendar">
                                    </div>
                                    <input type="datetime-local" class="date-input" data-date-input>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes Section -->
                    <div class="notes-section">
                        <textarea class="task-notes" placeholder="Write notes or context related to this task..."></textarea>
                    </div>

                    <!-- Modal Footer -->
                    <div class="modal-footer">
                        <div class="footer-actions">
                            <button class="save-task-button">
                                <div class="save-text">Save Task</div>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Task Detail View -->
                <div class="task-detail-view" data-task-detail-view>
                    <div class="modal-header">
                        <div class="modal-header-content">
                            <div class="task-icon-container">
                                <div class="task-icon">
                                    <img src="imgs/task_new/back.svg" alt="Back" class="back-icon" data-icon="back">
                                </div>
                                <div class="task-name-container">
                                    <div class="task-name-placeholder">Back to tasks</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal Body -->
                    <div class="modal-body">
                        <div class="task-title-container">
                            <input type="text" class="task-title-input" placeholder="Task title">
                        </div>
                        
                        <div class="task-meta-container">
                            <div class="participants-container">
                                <!-- Participants will be dynamically populated here -->
                            </div>
                            
                            <div class="task-actions">
                                <div class="action-button source-button" data-source-click>
                                    <div class="action-icon">
                                        <img src="imgs/sources/primitiv.svg" alt="Source" class="source-icon" data-icon="source">
                                    </div>
                                    <div class="action-text">Source</div>
                                </div>
                                <div class="action-button date-input-container">
                                    <div class="action-icon">
                                        <img src="imgs/task_new/calendar.svg" alt="Calendar" class="calendar-icon" data-icon="calendar">
                                    </div>
                                    <input type="datetime-local" class="date-input" data-date-input>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scrollable Content Area -->
                    <div class="modal-content-area">
                        <!-- Notes Section -->
                        <div class="notes-section">
                            <div class="task-detail-notes" contenteditable="true" data-placeholder="Write notes or context related to this task..."></div>
                        </div>

                        <!-- Suggested Actions Section -->
                        <div class="suggested-actions-section" data-suggested-actions-section>
                            <div class="section-label">Suggested Actions</div>
                            <div class="suggested-actions-container" data-suggested-actions-container>
                                <!-- Suggested actions will be dynamically loaded here -->
                            </div>
                        </div>
                    </div>

                    <!-- Modal Footer -->
                    <div class="modal-footer">
                        <div class="footer-actions">
                            <button class="enhance-task-button" data-enhance-task style="display: none;">
                                <div class="enhance-text">Enhance with AI</div>
                                <div class="sparkle-icon">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 3L13.5 8.5L19 10L13.5 11.5L12 17L10.5 11.5L5 10L10.5 8.5L12 3Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M19 4L19.5 6L21.5 6.5L19.5 7L19 9L18.5 7L16.5 6.5L18.5 6L19 4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </button>
                            <button class="complete-task-button">
                                <div class="complete-text">Mark Complete</div>
                                <div class="checkmark-icon">
                                    <svg width="20" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M20 6L9 17L4 12" stroke="var(--Primary-Text, #464646)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Settings Overlay -->
            <div class="settings-overlay" data-settings-overlay style="display: none;">
                <div class="settings-container" data-name="Primitiv_Settings">
                    <!-- Sleep Option -->
                    <div class="option-container" data-name="Container">
                        <div class="option-header" data-name="Option Header">
                            <div class="option-label" data-name="Option Label">
                                <div class="icon-container" data-name="Snooze">
                                    <div class="sleep-icon" data-name="Frame">
                                        <img src="imgs/settings/sleep.svg" alt="Sleep" style="width: 100%; height: 100%;">
                                    </div>
                                </div>
                                <p class="option-text">Sleep</p>
                            </div>
                            <button class="toggle-switch" data-name="Toggle Switch ON" data-sleep-toggle>
                                <div class="toggle-content">
                                    <p class="toggle-text">00:00</p>
                                </div>
                            </button>
                        </div>
                        <div class="subtext" data-name="Subtext">
                            <p>Put Primitiv into sleep mode for a set duration, and it will automatically wake up.</p>
                        </div>
                    </div>

                    <!-- Login Option (shown when not authenticated) -->
                    <div class="option-container clickable-option" data-name="Container" data-login style="display: none;">
                        <div class="option-header" data-name="Option Header">
                            <div class="option-label" data-name="Option Label">
                                <div class="icon-container" data-name="Snooze">
                                    <div class="login-icon" data-name="Frame">
                                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4M10 17l5-5-5-5M21 12H3" stroke="#6c788f" stroke-width="1.26" fill="none"/>
                                        </svg>
                                    </div>
                                </div>
                                <p class="option-text">Sign in</p>
                            </div>
                        </div>
                        <div class="subtext" data-name="Subtext">
                            <p>Sign in to access all features and sync your data.</p>
                        </div>
                    </div>

                    <!-- Manage Integrations Option -->
                    <div class="option-container clickable-option" data-name="Container" data-integrations>
                        <div class="option-header" data-name="Option Header">
                            <div class="option-label" data-name="Option Label">
                                <div class="icon-container" data-name="Snooze">
                                    <div class="integrations-icon" data-name="Frame">
                                        <img src="imgs/settings/integrations.svg" alt="Integrations" style="width: 100%; height: 100%;">
                                    </div>
                                </div>
                                <p class="option-text">Manage integrations</p>
                            </div>
                        </div>
                        <div class="subtext" data-name="Subtext">
                            <p>Manage your connected accounts, add new ones, or disconnect anytime.</p>
                        </div>
                    </div>

                    <!-- Log out Option -->
                    <div class="option-container clickable-option" data-name="Container" data-logout>
                        <div class="option-header" data-name="Option Header">
                            <div class="option-label" data-name="Option Label">
                                <div class="icon-container" data-name="Snooze">
                                    <div class="logout-icon" data-name="Frame">
                                        <img src="imgs/settings/logout.svg" alt="Logout" style="width: 100%; height: 100%;">
                                    </div>
                                </div>
                                <p class="option-text">Log out</p>
                            </div>
                        </div>
                        <div class="subtext" data-name="Subtext">
                            <p>Sign out of your account and keep Primitiv running.</p>
                        </div>
                    </div>

                    <!-- Exit Option -->
                    <div class="option-container clickable-option" data-name="Container" data-exit>
                        <div class="option-header" data-name="Option Header">
                            <div class="option-label" data-name="Option Label">
                                <div class="icon-container" data-name="Snooze">
                                    <div class="power-icon" data-name="Power">
                                        <img src="imgs/settings/exit.svg" alt="Exit" style="width: 100%; height: 100%;">
                                    </div>
                                </div>
                                <p class="option-text">Quit Primitiv</p>
                            </div>
                        </div>
                        <div class="subtext" data-name="Subtext">
                            <p>Close the entire application completely.</p>
                        </div>
                    </div>
                </div>

                <!-- Sleep Modal -->
                <div class="sleep-modal" id="sleepModal" style="display: none;">
                    <div class="sleep-modal-content">
                        <div class="sleep-modal-title">Put Primitiv to Sleep</div>
                        <div class="sleep-input-container">
                            <input type="number" class="sleep-time-input" id="sleepHours" min="0" max="23" value="1" placeholder="0">
                            <span class="sleep-colon">:</span>
                            <input type="number" class="sleep-time-input" id="sleepMinutes" min="0" max="59" value="0" placeholder="00">
                        </div>
                        <div class="sleep-buttons">
                            <button class="sleep-btn cancel" id="sleepCancel">Cancel</button>
                            <button class="sleep-btn start" id="sleepStart">Start Sleep</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="auth.js"></script>
    <script src="mainWindow.js"></script>
</body>
</html>
